<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        const array1 = {
            a: [1, [2, 3]],
            b: 1
        }
        //浅复制
        function shallowCopy(obj) {
            const result = {}
            for (const k in obj) {
                if (obj.hasOwnProperty(k)) {
                    result[k] = obj[k]
                }
            }
            return result
        }
        // const array2 = shallowCopy(array1)
        // array2.b = 2
        // array2.a[0] = 2
        // console.log('array1', array1)
        // console.log('array2', array2)

        //深拷贝
        function deepCopy(obj) {
            if (obj === null) return obj;
            if (obj instanceof Date) return new Date(obj);
            if (obj instanceof RegExp) return new RegExp(obj);
            if (typeof obj !== "object") return obj;
            // obj.constructor == 类型本身 Array | Object
            //let cloneObj = new obj.constructor();
            let cloneObj = Array.isArray(obj) ? [] : {}
            for (const k in obj) {
                if (obj.hasOwnProperty(k)) {
                    cloneObj[k] = deepCopy(obj[k])
                }
            }
            return cloneObj
        }
        const array2 = deepCopy(array1)
        array2.b = 2
        array2.a[0] = 2
        console.log('array1', array1)
        console.log('array2', array2)

    </script>
</body>

</html>